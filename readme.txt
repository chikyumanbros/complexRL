# complexRL

AI著readme

## 概要
complexRLは、高度な戦闘システムと独自のスキルシステム（コーデックス）を特徴とする、ターンベースのローグライクゲームです。

## 主要な機能

### 戦闘システム
- 詳細なステータスシステム（STR、DEX、CON、INT、WIS）
- サイズと速度に基づく戦闘メカニクス
- 機会攻撃システム
- モンスターの知能に基づく行動パターン

### キャラクター成長
- 経験値とレベルアップシステム
- レベルアップ時のステータス選択
- Codexポイントによるスキル解放システム

### ダンジョン生成
- 階層ごとの危険度システム（SAFE、NORMAL、DANGEROUS、DEADLY）
- 動的な照明効果と視界システム
- 自動探索機能
- 部屋ごとの明るさの違い

### モンスターAI
- 視界と聴覚に基づく探知システム
- 知能に基づく戦術的行動
- 体力に応じた逃走判断
- 睡眠状態と覚醒システム

### インターフェース
- 直感的なキーボード操作
- 詳細なステータス表示
- アクションログシステム
- ルックモードによる情報確認

### セーブシステム
- 自動セーブ機能
- ゲーム状態の完全な保存と復元

## 戦闘計算式
- 攻撃力: STRベース、DEXによるペナルティ、サイズ補正
- 防御力: CONベース、サイズ補正
- 命中率: DEXとWISの組み合わせ、CONによるペナルティ
- 回避率: DEXとWISの組み合わせ、STRとCONによるペナルティ
- 知覚: WISとDEXの平均、速度とサイズによる補正

## サイズと速度システム
### サイズ
- Tiny、Small、Medium、Large、Huge
- STRとCONの平均偏差で決定
- 攻撃力、防御力、移動速度に影響

### 速度
- Very Slow、Slow、Normal、Fast、Very Fast
- DEXと(STR+CON)の比率で決定
- サイズによる修正あり

## 戦闘計算式の詳細

### 基本ステータス計算
- HP = (CON×2 + STR/4) × サイズ補正 × レベルボーナス
- 攻撃力 = (STR×0.7 - DEX/4) × サイズ補正 + ダイス
- 防御力 = (CON×0.5 - INT/5) × サイズ補正 + ダイス
- サイズ補正 = 0.9～1.3 (STR+CONの平均値による)

### 戦闘ダイス
- 攻撃ダイス: √(DEX/2)個の1d(√STR×2)
- 防御ダイス: √(CON/3)個の1d(√CON×1.5)

### 命中率と回避率
- 命中率 = 50 + DEX×0.8 + WIS×0.4 - CON/4
- 回避率 = 8 + DEX×0.6 + WIS×0.3 - CON/5 - STR/5
- 速度: DEX/(STR+CON)の比率に基づく
- 知覚: (WIS+DEX)/2 + 速度/サイズ補正

### サイズと速度の詳細
#### サイズ判定 ((STR+CON-20)/2に基づく)
- Tiny: -5以下
- Small: -3以下
- Medium: 3以下
- Large: 5以下
- Huge: 5超

#### 速度判定 ((DEX×サイズ補正)/(STR+CON)の比率)
- Very Slow: 0.7以下
- Slow: 0.9以下
- Normal: 1.1以下
- Fast: 1.3以下
- Very Fast: 1.3超
※サイズ補正: サイズ差1につき±10%

### 戦闘の流れ
1. 速度判定
2. 命中判定 (命中率 vs 1d100)
3. 回避判定 (回避率 vs 1d100)
4. ダメージ計算 (攻撃力 - 防御力)

### ペナルティシステム
- 包囲ペナルティ: 周囲の敵1体につき命中率/回避率-15% (最大-60%)
- 機会攻撃: 敵が逃走時、命中率-30%、ダメージ+50%（反撃不可）

## 今後の開発予定
- より多様なモンスターの追加
- より複雑なダンジョン生成アルゴリズム
- 追加のスキルとアビリティ
- バランス調整の継続的な実施

## 開発情報
### 使用技術
- HTML5
- CSS3
- JavaScript (ES6+)

### ファイル構成
- `index.html`: メインのHTML
- `js/`: JavaScriptファイル群
  - `game.js`: ゲームのメインロジック
  - `player.js`: プレイヤー関連の処理
  - `monster.js`: モンスター関連の処理
  - `map.js`: マップ生成
  - その他
- `styles/`: CSSファイル
  - `main.css`: メインのスタイル定義

## バージョン
現在のバージョン: v0.1.0
